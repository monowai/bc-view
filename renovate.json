{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "schedule:earlyMondays",
    ":dependencyDashboard",
    ":semanticCommits"
  ],
  "timezone": "Pacific/Auckland",
  "labels": ["dependencies"],
  "assignees": ["@mikeh"],
  "reviewers": ["@mikeh"],
  "configMigration": true,
  "packageRules": [
    {
      "description": "Auto-merge patch updates for non-major dependencies",
      "matchUpdateTypes": ["patch", "pin", "digest"],
      "automerge": true,
      "automergeType": "pr",
      "matchPackageNames": ["!/^next$/", "!/^react$/", "!/^typescript$/"]
    },
    {
      "description": "Group type definitions together",
      "groupName": "type definitions",
      "automerge": true,
      "matchPackageNames": ["/^@types//"]
    },
    {
      "description": "Group ESLint packages together",
      "groupName": "ESLint packages",
      "matchPackageNames": ["/eslint/", "/@typescript-eslint//"]
    },
    {
      "description": "Group testing packages together",
      "groupName": "testing packages",
      "matchPackageNames": ["/jest/", "/@testing-library//", "/babel-jest/"]
    },
    {
      "description": "Group OpenTelemetry packages together",
      "groupName": "OpenTelemetry packages",
      "matchPackageNames": ["/^@opentelemetry//"]
    },
    {
      "description": "Separate major updates for critical packages",
      "matchPackageNames": [
        "next",
        "react",
        "react-dom",
        "typescript",
        "@auth0/nextjs-auth0",
        "@sentry/nextjs"
      ],
      "separateMajorMinor": true,
      "separateMinorPatch": true
    },
    {
      "description": "Auto-merge minor and patch updates for dev dependencies",
      "matchDepTypes": ["devDependencies"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true,
      "matchPackageNames": ["!/^typescript$/", "!/^@typescript-eslint//"]
    }
  ],
  "vulnerabilityAlerts": {
    "enabled": true,
    "assignees": ["@mikeh"],
    "labels": ["security"]
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["before 6am on Monday"]
  },
  "prConcurrentLimit": 5,
  "prHourlyLimit": 2,
  "commitMessagePrefix": "chore:",
  "commitMessageAction": "update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "prTitle": "{{commitMessagePrefix}} {{commitMessageAction}} {{commitMessageTopic}} {{commitMessageExtra}}",
  "prBodyTemplate": "This PR updates {{depName}} from `{{currentVersion}}` to `{{newVersion}}`.\n\n{{#if hasReleaseNotes}}**Release Notes:**\n{{{releaseNotes}}}{{/if}}\n\n{{#if hasChangelog}}**Changelog:**\n{{{changelog}}}{{/if}}\n\n---\n*This PR was generated automatically by Renovate Bot.*",
  "rangeStrategy": "bump"
}
